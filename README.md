# NoSos

NoSos — это инструмент для мониторинга активности игроков на сервере Minecraft с графическим отображением на карте. Он собирает данные о местоположении игроков, отображает их на графике и генерирует оповещения при нарушении установленных правил.

## Возможности

- Мониторинг онлайн-игроков в реальном времени.
- Отображение позиций игроков на карте.
- Визуализация зон с возможностью настройки.
- Генерация тепловых карт активности игроков.
- Гибкая настройка интерфейса и параметров.
- Логирование событий и уведомлений.
- Поддержка исключённых зон (без генерации алертов).
- Кэширование данных для повышения производительности.

## Установка и запуск

### Требования

- Python 3.8+
- Установленные зависимости (см. ниже)

### Установка зависимостей

```bash
pip install -r requirements.txt
```

### Запуск

```bash
python main.py
```

## Конфигурация

Конфигурация хранится в файле `config.yaml`. Основные параметры:

- **players_url** — URL для получения данных об игроках.
- **world_bounds** — координаты границ мира.
- **update_interval** — интервал обновления данных в секундах.
- **display** — параметры отображения игроков (размер точек, цвет и прозрачность).
- **alerts** — зоны оповещения и лимиты игроков.
- **heatmap** — настройки тепловой карты.

Пример настроек зоны:

```yaml
zones:
  - name: "Спавн"
    bounds: {xmin: -500, xmax: 500, zmin: -500, zmax: 500}
    alert_level: "WARNING"
    cooldown: 30
    excluded: True  # Зона исключена из обработки алертов
  - name: "Сосмарк"
    bounds: {xmin: 4124, xmax: 5291, zmin: -3465, zmax: -2225}
    allowed_players: ["K1zik", "Kwakich", "_DeN41k_"]
    alert_level: "CRITICAL"
    cooldown: 60
```

## Использование

1. Запустите программу.
2. Наблюдайте за позициями игроков на карте.
3. Включите или отключите отображение тепловой карты.
4. Следите за активными алертами в логах и на графике.

## Оповещения

NoSos автоматически проверяет:

- Нарушения входа в запрещённые зоны.
- Превышение максимального количества игроков.
- Некорректные или пропущенные данные.

Все события логируются в `monitor.log`.

## История тепловой карты

Исторические данные сохраняются в файле `heatmap_history.pkl`. Для загрузки истории используется метод `load_history()`, а для сохранения — `save_history()`.

## Основные классы

- **Alert**: Класс для хранения информации об алерте.
- **BaseAlertRule**: Базовый класс для правил генерации алертов.
- **ZoneIntrusionRule**: Правило для проверки вторжений в зоны.
- **PlayerCountRule**: Правило для проверки лимита игроков.
- **AlertManager**: Управляет правилами и обработкой алертов.
- **NoSos**: Основной класс приложения, отвечающий за инициализацию и запуск.

## Лицензия

Этот проект распространяется под лицензией MIT.
