# NoSos — Мониторинг игроков Minecraft сервера (в данный момент /player_report в переработке)

*Система мониторинга активности игроков Minecraft в реальном времени с визуализацией и аналитикой.*

## Описание
NoSos — это инструмент для отслеживания передвижения игроков на Minecraft сервере с расширенной аналитикой и интеграцией с Telegram. Он предоставляет:
- Отображение позиций игроков в реальном времени.
- Визуализацию тепловой карты активности.
- Оповещения о входе в запрещенные зоны.
- Аналитику аномалий (телепортация, высокая скорость передвижения).
- Интеграцию с Telegram для отправки уведомлений и администрирования.

## Особенности
- **Карта активности**: графическое отображение игроков, зон и тепловых областей.
- **Гибкие зоны**: оповещения при входе игроков в запрещённые или контролируемые зоны.
- **Telegram бот**: команды для администрирования, управления доступом и отправки уведомлений.
- **Аналитика игроков**: отчёты по активности, топ локаций, обнаружение аномального поведения.
- **Безопасность**: логирование действий игроков, контроль доступа через Telegram.

## Установка
### 1. Установка зависимостей
Установите необходимые библиотеки:
```bash
pip install -r requirements.txt
```
_(Файл `requirements.txt` должен включать: `matplotlib`, `requests`, `python-telegram-bot`, `sqlite3`, `numpy`, `pandas`, `pyyaml`, `aiohttp`, `beautifulsoup4`)_

### 2. Настройка конфигурации
Отредактируйте `config.yaml`:
- **`players_urls`**: URL для получения данных игроков из разных миров.
- **`telegram.token` и `telegram.chat_id`**: Токен бота и ID чата.
- **`alerts.zones`**: Список зон и их параметры.

Пример `config.yaml`:
```yaml
players_urls:
  overworld: "MAP URL можно добавь ещё больше миров"
world_bounds:
  xmin: -25000
  xmax: 25000
  zmin: -25000
  zmax: 25000
telegram:
  token: "ТОКЕН_БОТА"
  chat_id: "ID_ЧАТА"
alerts:
  zones:
    - name: "Спавн"
      bounds: { xmin: -500, xmax: 500, zmin: -500, zmax: 500 }
      alert_level: "INFO"
```

### 3. Запуск
Запустите приложение командой:
```bash
python main.py
```

## Использование
### Telegram команды
#### Для пользователей:
- `/start` — регистрация.
- `/subscribe` — подписка на уведомления.
- `/history` — топ активных игроков.

#### Для администраторов:
- `/users` — список пользователей.
- `/approve <ID>` — одобрение доступа.
- `/heatmap` — визуализация активности по зонам.
- `/anomalies <скорость> <дистанция>` — проверка аномалий передвижения.
- `/player_report <ник>` — получение отчёта по игроку.

### Графический интерфейс
- **Карта** отображает текущие позиции игроков, зоны и тепловую карту.
- **Оповещения** появляются при нарушении зон или обнаружении аномалий.

## Примеры использования
1. Проверка подозрительного перемещения:
   ```
   /anomalies 60 120
   ```
2. Получение отчёта по игроку:
   ```
   /player_report Игрок658
   ```

## Логирование и мониторинг
- **Логирование**: Система пишет события в `security.log`.
- **Мониторинг ошибок**: Критические ошибки могут отправляться в Telegram или другие сервисы мониторинга.

## Лицензия
Проект распространяется под лицензией MIT. Подробности в файле `MIT`.
